<!DOCTYPE html>
<html lang="py-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilha</title>
    <style>
        html{text-align: center;}
        hr{
            margin: 40px 0;
        }
        p{
            height: 60px;
            overflow-y: scroll;
        }
    </style>
</head>
<body>
    <h1>Estrutura de dados</h1>
    <h2>Pilha / stack</h2>
    <p id="pilha">0</p>
    <button id="adicionarPilha">adicionar</button>
    <button id="removerPilha">excluir</button>
    <p id="stackMessage"> </p>
    <hr>
    <h2>Fila / queue</h2>
    <p id="fila">0</p>
    <button id="adicionarFila">adicionar</button>
    <button id="removerFila">excluir</button>
    <p id="queueMessage"> </p>

    <script>
        function updateView() {
            if(pilha){
                pilhaView.innerHTML = pilha.map(
                    (sub) => `[${sub.join(', ')}]`
                ).join('<br>')
            }
            if(fila){
                filaView.innerHTML = fila.map(
                    (sub) => `[${sub.join(', ')}]`
                ).join('<br>')
            }
        }

        function overflow(arr){
            arr.push([1])
        }

        const pilha = [[1,2,3,4,5]]
        const fila = [[1,2,3,4,5]]

        const pilhaView = document.querySelector('#pilha')
        const filaView = document.querySelector('#fila')
        const stackMessage = document.querySelector('#stackMessage')
        const queueMessage = document.querySelector('#queueMessage')

        const adicionarPilha = document.querySelector('#adicionarPilha')
        const removerPilha = document.querySelector('#removerPilha')

        const adicionarFila = document.querySelector('#adicionarFila')
        const removerFila = document.querySelector('#removerFila')

        updateView()

        adicionarPilha.addEventListener('click' , () => {
            if(pilha[pilha.length - 1].length === 0){
                pilha[pilha.length-1].push(1)
                stackMessage.innerText = ''
            }else if(pilha[pilha.length - 1].length === 10){
                stackMessage.innerText = 'overflow'
                overflow(pilha)
            }else{
                const ultimoArray = pilha[pilha.length - 1]
                const ultimoValor = ultimoArray[ultimoArray.length - 1]+1
                ultimoArray.push(ultimoValor)
                stackMessage.innerText = ''
            }
            updateView()
        })

        removerPilha.addEventListener('click' , () => {
            if(pilha[pilha.length - 1].length === 0 && pilha.length === 1){
                console.log('arr vazio')
                stackMessage.innerText = 'não há itens na pilha para serem removidos'
            }else{
                console.log('remove ultimo')
                pilha[pilha.length-1].pop()
                if(pilha[pilha.length-1].length === 0 && pilha.length > 1){
                    pilha.pop()
                }
            }
            updateView()
        })

        adicionarFila.addEventListener('click' , () => {
            if(fila) {
                const ultimoArray = fila[fila.length - 1]

                if(ultimoArray.length === 0){
                    ultimoArray.push(1)
                }else if(ultimoArray.length === 10){
                    queueMessage.innerText = 'Overflow'
                    overflow(fila)
                }else{
                    const ultimoValor = ultimoArray[ultimoArray.length-1]+1
                    ultimoArray.push(ultimoValor) 
                    queueMessage.innerText = ''
                }
                updateView()
            }
        })

        removerFila.addEventListener('click' , () => {
            if(fila){
                const primeiroArray = fila[0]
                if(primeiroArray.length === 0 && fila.length === 1){
                    queueMessage.textContent = 'não ha itens na fila para serem excluídos'
                }else if(primeiroArray.length === 1 && fila.length > 1){
                    primeiroArray.shift()
                    fila.shift()
                }else{
                    primeiroArray.shift()
                }
                console.log(fila)
                updateView()
            }
        })
    </script>
    
</body>
</html>